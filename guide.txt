============================================================
REFERRAL SYSTEM WEBSITE - FULL SYSTEM GUIDE
============================================================

ğŸ“¦ PROJECT NAME: Referral Wallet System for MyDukan

ğŸ›  PURPOSE:
To allow individuals to register, complete KYC, receive a referral code, and earn 5% commission on confirmed sales made through their referral code on a MyDukan.io-powered e-commerce store. Admin has full manual control of verification, referral assignment, sale tracking, and withdrawals.

============================================================
ğŸ”§ TECH STACK OVERVIEW
============================================================

ğŸ“± FRONTEND:
- React.js
- Next.js (with App Router)
- TailwindCSS (for utility-first styling)
- Framer Motion (for UI animations and transitions)

ğŸ”— BACKEND / DATABASE:
- Supabase (PostgreSQL)
- Supabase Auth (email login only)
- Supabase Storage (for Aadhaar and selfie uploads)
- Supabase Edge Functions (for wallet updates, secure backend logic)

ğŸŒ DEPLOYMENT:
- Vercel (frontend + API endpoints)

============================================================
ğŸ¨ DESIGN & UI GUIDELINES
============================================================

ğŸŒˆ COLOR SCHEME (MODERN + RICH LOOK):

PRIMARY COLOR: #0077FF (Blue â€“ trust, action)
ACCENT COLOR:  #00C897 (Green â€“ success, money)
DARK SHADE:   #0B0F19 (Charcoal â€“ depth)
TEXT COLOR:   #1F2937 (Gray-800)
BACKGROUND:   #F9FAFB (Ultra light gray)
BORDER/NEUTRAL: #E5E7EB (Light border)

ğŸ‘ï¸ FONTS:
- Primary: Inter / Poppins (modern + readable)
- Font weights: 400, 600, 700

ğŸ” ANIMATIONS:
- Use Framer Motion for smooth entrance animations
- Animate section transitions, success modals, form feedback, and dashboard tiles

============================================================
ğŸ§± FOLDER STRUCTURE
============================================================

.
â”œâ”€â”€ pages
â”‚   â”œâ”€â”€ index.tsx                # Landing Page
â”‚   â”œâ”€â”€ register.tsx             # User Registration / KYC
â”‚   â”œâ”€â”€ dashboard.tsx            # Referral User Dashboard
â”‚   â”œâ”€â”€ admin
â”‚   â”‚   â”œâ”€â”€ login.tsx            # Admin Login
â”‚   â”‚   â””â”€â”€ panel.tsx            # Admin Control Panel
â”‚   â””â”€â”€ api                      # Optional Next.js API routes
â”‚
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ forms                    # KYCForm, WithdrawalForm
â”‚   â”œâ”€â”€ ui                       # Button, Modal, Card, Input
â”‚   â””â”€â”€ layout                   # Header, Footer, Sidebar
â”‚
â”œâ”€â”€ lib
â”‚   â”œâ”€â”€ supabase.ts              # Supabase Client Setup
â”‚   â”œâ”€â”€ utils.ts                 # Helper functions
â”‚   â””â”€â”€ edge.ts                  # Edge Function handlers
â”‚
â”œâ”€â”€ public
â”‚   â””â”€â”€ assets                   # Logo, Placeholder images
â”‚
â”œâ”€â”€ styles
â”‚   â””â”€â”€ globals.css              # Tailwind + custom CSS
â”‚
â””â”€â”€ supabase
    â”œâ”€â”€ schema.sql               # Optional: Supabase schema
    â””â”€â”€ functions                # Edge Functions

============================================================
ğŸ§© DATABASE SCHEMA (SUPABASE)
============================================================

-- Table: users
id (uuid) PK
email (text)
full_name (text)
phone (text)
aadhaar_url (text)
selfie_url (text)
address (text)
referral_code (text) - generated manually
status (text) - ['pending', 'approved', 'rejected']
created_at (timestamp)

-- Table: referral_sales
id (uuid) PK
user_id (uuid) FK â†’ users.id
order_id (text)
product_name (text)
sale_amount (float)
commission_amount (float) -- auto-calculated: 5% of sale_amount
status (text) - ['processing', 'confirmed']
added_by_admin (boolean)
created_at (timestamp)

-- Table: wallet
user_id (uuid) PK â†’ users.id
total_earned (float)
available_balance (float)
last_updated (timestamp)

-- Table: withdrawals
id (uuid)
user_id (uuid) FK â†’ users.id
amount (float)
bank_details (json or text)
status (text) - ['requested', 'paid']
requested_at (timestamp)
paid_at (timestamp)

============================================================
ğŸ” AUTHENTICATION & ACCESS
============================================================

- User signup/login with Supabase Auth (email only)
- Admin login hardcoded (e.g., email: thegurtoy@gmail.com)
- Admin gets full access to approve users, assign referral codes, manage sales, and withdrawals

============================================================
ğŸ§‘â€ğŸ’¼ USER FLOW
============================================================

1. User visits `/register` â†’ fills profile form
   - Aadhaar and selfie upload required
   - Status: `pending`

2. Admin logs in â†’ reviews submissions
   - Approves user + assigns referral code
   - Status: `approved`

3. User logs into `/dashboard`
   - Views referral code, earnings, withdrawal option
   - Can request payout if balance â‰¥ â‚¹500

4. Admin manually monitors MyDukan orders
   - If referral code was used:
     â†’ Adds sale via Admin Panel
     â†’ Status: `processing` â†’ `confirmed` on delivery
     â†’ 5% of sale added to wallet

5. Admin views withdrawal requests
   - Manually pays via UPI/bank
   - Marks as `paid`

============================================================
ğŸ§  EDGE FUNCTION LOGIC (supabase/functions/)
============================================================

1. `update_wallet.ts`
   - Input: user_id, sale_amount
   - Logic:
     â†’ Calculate 5%
     â†’ Add to total_earned and available_balance

2. `request_withdrawal.ts`
   - Input: user_id, amount
   - Check if balance â‰¥ â‚¹500
   - Create withdrawal request

3. `confirm_withdrawal.ts`
   - Admin-only callable
   - Marks withdrawal as paid and deducts from balance

============================================================
ğŸ“ˆ SCALABILITY IDEAS
============================================================

- Add referral usage analytics (clicks, conversions)
- Enable email notifications for referral approvals & payouts
- Integrate with Razorpay Payouts API (future)
- Add referral link tracking with UTM parameters
- Export sales reports (CSV)

============================================================
âœ… DEPLOYMENT PLAN
============================================================

1. Supabase: Setup DB, Storage, Auth, Edge Functions
2. Vercel: Connect Next.js repo, auto-deploy from GitHub
3. Use environment variables:
   - SUPABASE_URL
   - SUPABASE_ANON_KEY
   - ADMIN_EMAIL (for admin login verification)

============================================================
ğŸŒŸ DESIGN PRINCIPLES
============================================================

- Clean and modern UI
- High contrast CTAs (buttons in blue/green)
- Rich visuals with card layouts
- Responsive on mobile and desktop
- Animate entrances and modals with Framer Motion
- Include placeholder graphics for new users

============================================================
ğŸ“Œ ADMIN FEATURES CHECKLIST
============================================================

- [x] Admin login
- [x] User verification with KYC document view
- [x] Referral code assignment
- [x] Add & manage referral sales
- [x] Confirm sale â†’ commission update
- [x] View wallet balances
- [x] View and process withdrawal requests
- [x] Export data (future)

============================================================
